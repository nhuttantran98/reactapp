(this["webpackJsonpfirst-app-1"]=this["webpackJsonpfirst-app-1"]||[]).push([[0],{242:function(e,t,a){},294:function(e,t,a){e.exports=a(537)},299:function(e,t,a){},300:function(e,t,a){},484:function(e,t,a){},490:function(e,t,a){},516:function(e,t){},534:function(e,t,a){},535:function(e,t,a){},536:function(e,t,a){},537:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(18),o=a.n(i),s=(a(299),a(4)),c=a(5),l=a(9),u=a(8),m=a(10),h=(a(300),a(538)),p=a(54),d=a(539),f=a(279),g=a.n(f),y=a(268),b=a(257),E=a(248),v=a(253),k=a(267),x=a(22),O=h.a.Sider,S=p.a.SubMenu,C=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={collapse:!1},a.onCollapse=function(e){a.setState({collapsed:e})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(O,{collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse},r.a.createElement("div",{className:"logo",style:{minHeight:"60px",textAlign:"center",paddingTop:"15px"}},r.a.createElement(d.a,{style:{float:"left"},src:"./logo512.png"}),r.a.createElement(g.a,{style:{color:"white"},level:3},"HCMUT Dryer")),r.a.createElement(p.a,{theme:"dark",defaultSelectedKeys:["1"],mode:"inline"},r.a.createElement(p.a.Item,{key:"1"},r.a.createElement(y.a,null),r.a.createElement("span",null,"Th\u1ed1ng k\xea d\u1eef li\u1ec7u"),r.a.createElement(x.b,{to:"/data-statistics"})),r.a.createElement(p.a.Item,{key:"2"},r.a.createElement(b.a,null),r.a.createElement("span",null,"C\xf4ng th\u1ee9c s\u1ea5y"),r.a.createElement(x.b,{to:"/script"})),r.a.createElement(S,{key:"sub1",title:r.a.createElement("span",null,r.a.createElement(E.a,null),r.a.createElement("span",null,"Qu\u1ea3n l\xfd t\xe0i kho\u1ea3n"))},r.a.createElement(p.a.Item,{key:"3"},"T\xe0i kho\u1ea3n Qu\u1ea3n l\xfd",r.a.createElement(x.b,{to:"/all-user"})),r.a.createElement(p.a.Item,{key:"4"},"T\xe0i kho\u1ea3n V\u1eadn h\xe0nh"),r.a.createElement(p.a.Item,{key:"5"},"T\u1ea1o t\xe0i kho\u1ea3n",r.a.createElement(x.b,{to:"/add-user"}))),r.a.createElement(S,{key:"sub2",title:r.a.createElement("span",null,r.a.createElement(E.a,null),r.a.createElement("span",null,"Qu\u1ea3n l\xfd m\xe1y s\u1ea5y"))},r.a.createElement(p.a.Item,{key:"6"},"Danh s\xe1ch m\xe1y s\u1ea5y",r.a.createElement(x.b,{to:"/all-machine"})),r.a.createElement(p.a.Item,{key:"7"},"T\u1ea1o m\xe1y s\u1ea5y",r.a.createElement(x.b,{to:"/add-machine"}))),r.a.createElement(S,{key:"sub3",title:r.a.createElement("span",null,r.a.createElement(v.a,null),r.a.createElement("span",null,"M\xe1y s\u1ea5y"))},r.a.createElement(p.a.Item,{key:"8"},"M\xe1y A",r.a.createElement(x.b,{to:"/may-a"})),r.a.createElement(p.a.Item,{key:"9"},"M\xe1y B")),r.a.createElement(p.a.Item,{key:"10"},r.a.createElement(k.a,null),"Thi\u1ebft l\u1eadp n\xe2ng cao",r.a.createElement(x.b,{to:"/2"}))))}}]),t}(n.Component),w=a(53),j=a(7),T=a.n(j),F=a(25),I=a(29),D=a(21),R=a(543),A=a(548),M=a(292),N=a(65),z=a(23),P=a.n(z),_=function(e){return P.a.post("/users/register",{first_name:e.first_name,last_name:e.last_name,email:e.email,password:e.password,dob:e.dob,role:e.role,phone:e.phone}).then((function(e){return console.log("Registerd"),e.data}))},V=function(e){return P.a.post("/users/login",{email:e.email,password:e.password}).then((function(t){return localStorage.setItem("useremail",e.email),localStorage.setItem("usertoken",t.data.token),localStorage.setItem("role",t.data.role),console.log(t),t.data})).catch((function(e){console.log(e)}))},q=a(20),H=a.n(q),K=R.a.Column,B=R.a.ColumnGroup,X=h.a.Content,L=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).deleteUser=function(e){var t;(t={email:e},P.a.post("/users/delete-user",{email:t.email}).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),e}))).then((function(t){if(console.log(e),t.error)H()({title:"Oppss...!",text:"X\xf3a kh\xf4ng th\xe0nh c\xf4ng!",icon:"error",button:"OK"});else{var n=a.state.data.filter((function(t){return t.email!==e}));console.log(n),a.setState({data:n}),H()({title:"Tadaaa...!",text:"X\xf3a th\xe0nh c\xf4ng!",icon:"success",button:"OK"})}}))},a.state={data:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("/users/get-all-users",{headers:{authorization:localStorage.getItem("usertoken")}}).then((function(e){return e.data})).catch((function(e){console.log(e)}));case 2:t=e.sent,a=t.map((function(e){var t=e.id,a=e.first_name,n=e.last_name,r=Object(I.a)(e,["id","first_name","last_name"]);return Object(F.a)({key:t,firstname:a,lastname:n},r)})),this.setState({data:a});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(X,{style:{margin:"0 16px"}},r.a.createElement(A.a,{style:{margin:"16px 0"}},r.a.createElement(A.a.Item,null),r.a.createElement(A.a.Item,null)),r.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:360}},r.a.createElement(R.a,{dataSource:this.state.data},r.a.createElement(B,{title:"Full Name"},r.a.createElement(K,{title:"First Name",dataIndex:"firstname",key:"firstname"}),r.a.createElement(K,{title:"Last Name",dataIndex:"lastname",key:"lastname"})),r.a.createElement(K,{title:"Role",dataIndex:"role",key:"role",render:function(e){var t="quanly"===e?"red":"blue";return r.a.createElement("span",null,r.a.createElement(M.a,{color:t},e))}}),r.a.createElement(K,{title:"Phone",dataIndex:"phone",key:"phone"}),r.a.createElement(K,{title:"Email",dataIndex:"email",key:"email"}),r.a.createElement(K,{title:"Action",key:"action",dataIndex:"email",render:function(t){return r.a.createElement("span",null,r.a.createElement(N.a,{type:"link"},r.a.createElement(x.b,{to:{pathname:"/edit-user",aboutProps:{email:"".concat(t)}}},"Edit")),r.a.createElement(N.a,{type:"link",danger:!0,onClick:function(){return e.deleteUser(t)}},"Delete"))}}))))}}]),t}(n.Component),W=a(546),Y=a(545),U=a(134),J=a(547),Q={labelCol:{span:8},wrapperCol:{span:16}},G={wrapperCol:{offset:8,span:16}},Z=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).formRef=r.a.createRef(),a.onFinish=function(e){var t=e.dob,n=Object(F.a)({},e,{dob:t.format("YYYY-MM-DD")});_({first_name:n.first_name,last_name:n.last_name,password:n.password,email:n.email,dob:n.dob,phone:n.phone,role:n.role}).then((function(e){console.log(e),e.error?H()({title:"Oppss...!",text:"Email \u0111\xe3 t\u1ed3n t\u1ea1i!",icon:"error",button:"OK"}):(H()({title:"Tadaaa...!",text:"\u0110\u0103ng k\xfd th\xe0nh c\xf4ng!",icon:"success",button:"OK"}),a.props.history.push("/all-user"))})),console.log(n)},a.onReset=function(){a.formRef.current.resetFields()},a.onFill=function(){a.formRef.current.setFieldsValue({note:"Hello world!",gender:"male"})},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{margin:"60px",background:"white"}},r.a.createElement("h1",{style:{margin:"25px",fontSize:"45px"}},"Th\xeam t\xe0i kho\u1ea3n"),r.a.createElement("div",{style:{marginRight:"250px",paddingBottom:"15px"}},r.a.createElement(W.a,Object.assign({},Q,{ref:this.formRef,name:"control-ref",onFinish:this.onFinish}),r.a.createElement(W.a.Item,{name:"email",label:"Email",rules:[{type:"email",message:"Email kh\xf4ng h\u1ee3p l\u1ec7"},{required:!0,message:"Xin nh\u1eadp Email"}]},r.a.createElement(Y.a,null)),r.a.createElement(W.a.Item,{name:"password",label:"Password",rules:[{required:!0,message:"Please input your password!"}],hasFeedback:!0},r.a.createElement(Y.a.Password,null)),r.a.createElement(W.a.Item,{name:"confirm",label:"Confirm Password",dependencies:["password"],hasFeedback:!0,rules:[{required:!0,message:"Xin h\xe3y nh\u1eadp m\u1eadt kh\u1ea9u!"},function(e){var t=e.getFieldValue;return{validator:function(e,a){return a&&t("password")!==a?Promise.reject("M\u1eadt kh\u1ea9u kh\xf4ng tr\xf9ng kh\u1edbp!"):Promise.resolve()}}}]},r.a.createElement(Y.a.Password,null)),r.a.createElement(W.a.Item,{name:"role",label:"Ch\u1ee9c n\u0103ng",rules:[{required:!0}]},r.a.createElement(U.a.Group,null,r.a.createElement(U.a,{value:"quanly"},"Qu\u1ea3n l\xfd"),r.a.createElement(U.a,{value:"vanhanh"},"V\u1eadn h\xe0nh"))),r.a.createElement(W.a.Item,{name:"first_name",label:"H\u1ecd v\xe0 \u0111\u1ec7m",rules:[{required:!0,message:"Xin h\xe3y nh\u1eadp H\u1ecd v\xe0 t\xean \u0111\u1ec7m!"}]},r.a.createElement(Y.a,null)),r.a.createElement(W.a.Item,{name:"last_name",label:"T\xean",rules:[{required:!0,message:"Xin h\xe3y nh\u1eadp T\xean!"}]},r.a.createElement(Y.a,null)),r.a.createElement(W.a.Item,{name:"dob",label:"Ng\xe0y sinh",rules:[{type:"object",required:!0,message:"Please select time!"}]},r.a.createElement(J.a,{showTime:!0,format:"YYYY-MM-DD"})),r.a.createElement(W.a.Item,{name:"phone",label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",rules:[{required:!0,message:"Xin h\xe3y nh\u1eadp S\u1ed1 \u0111i\u1ec7n tho\u1ea1i!"}]},r.a.createElement(Y.a,null)),r.a.createElement(W.a.Item,G,r.a.createElement(N.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(N.a,{htmlType:"button",onClick:this.onReset},"Reset"),r.a.createElement(N.a,{type:"link",htmlType:"button",onClick:this.onFill},"Fill form")))))}}]),t}(n.Component),$=a(272),ee=new(function(){function e(){Object(s.a)(this,e),this.authenticate=""}return Object(c.a)(e,[{key:"login",value:function(e){this.authenticate=localStorage.getItem("usertoken"),e()}},{key:"logout",value:function(e){this.authenticate="",e()}},{key:"isAuthenticated",value:function(){return this.authenticate}},{key:"isQL",value:function(){return"quanly"===localStorage.getItem("role")}},{key:"isVH",value:function(){return"vanhanh"===localStorage.getItem("role")}}]),e}()),te=(a(484),function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).formRef=r.a.createRef(),a.onFinish=function(e){V({email:e.username,password:e.password}).then((function(e){e.error?H()({title:"Oppss...!",text:"Sai Email hoac Password",icon:"error",button:"OK"}):ee.login((function(){a.props.history.push("/all-user")}))}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{width:"35%",margin:"auto",textAlign:"center",marginTop:"65px"}},r.a.createElement(W.a,{ref:this.formRef,name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:this.onFinish,style:{padding:"35px 35px 15px 35px",background:"white"}},r.a.createElement(W.a.Item,{name:"username",rules:[{required:!0,message:"Please input your Username!"}]},r.a.createElement(Y.a,{prefix:r.a.createElement(E.a,{className:"site-form-item-icon"}),placeholder:"Username"})),r.a.createElement(W.a.Item,{name:"password",rules:[{required:!0,message:"Please input your Password!"}]},r.a.createElement(Y.a,{prefix:r.a.createElement($.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Password"})),r.a.createElement(W.a.Item,null,r.a.createElement(N.a,{type:"primary",htmlType:"submit",className:"login-form-button"},"Log in"))))}}]),t}(n.Component)),ae=a(15),ne=a(113),re=a(544),ie=a(541),oe=a(542),se=a(133),ce=a.n(se),le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).chartRef=r.a.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.myChart.data.datasets[0].data=this.props.data,this.myChart.update()}},{key:"componentDidMount",value:function(){this.myChart=new ce.a(this.chartRef.current,{type:"line",data:{datasets:[{label:"Temperature",data:[],fill:!1,lineTension:.2,borderColor:"red",borderWidth:1}]},options:{title:{text:"Temperature Chart",display:!0},scales:{xAxes:[{type:"time",time:{unit:"second",displayFormats:{second:"h:mm:ss a"}}}],yAxes:[{display:!0,ticks:{beginAtZero:!0,max:100}}]}}})}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.chartRef})}}]),t}(n.Component),ue=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).chartRef=r.a.createRef(),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){this.myChart.data.datasets[0].data=this.props.data,this.myChart.update()}},{key:"componentDidMount",value:function(){this.myChart=new ce.a(this.chartRef.current,{type:"bar",data:{datasets:[{label:"Humidity",data:[],fill:!1,lineTension:.2,borderColor:"blue",borderWidth:1}]},options:{title:{text:"Humidity Chart",display:!0},scales:{xAxes:[{type:"time",time:{unit:"second",displayFormats:{second:"h:mm:ss a"}}}],yAxes:[{display:!0,ticks:{beginAtZero:!0,max:100}}]}}})}},{key:"render",value:function(){return r.a.createElement("canvas",{ref:this.chartRef})}}]),t}(n.Component),me=a(288),he=function(e){return P.a.post("/machines/register",{name:e.name,position:e.position,description:e.description,code:e.code}).then((function(e){return console.log("Registerd"),e.data})).catch((function(e){return e}))},pe=function(e){var t=JSON.stringify(e.script);return P.a.post("/scripts/add-script",{name:e.name,script:t,totalTime:e.totalTime,useremail:e.useremail}).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),e}))},de=function(e){return P.a.get("/scripts/get-all-scripts",{headers:{authorization:localStorage.getItem("usertoken")}}).then((function(e){return e.data})).catch((function(e){console.log(e)}))},fe=function(e){return P.a.post("/setups/get-data-chart-setup",{id:e.id,code:e.code}).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),e}))},ge=a(262),ye=a(67),be=a.n(ye),Ee=(a(490),a(540)),ve=a(247),ke=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).isChange=!0,a.lightStatus=a.props.status,a.state={status:a.props.status},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"renderOn",value:function(){return r.a.createElement(d.a,{size:100,icon:r.a.createElement(ve.a,null),style:{backgroundColor:"#87d068"}})}},{key:"renderOff",value:function(){return r.a.createElement(d.a,{size:100,icon:r.a.createElement(ve.a,null)})}},{key:"showStatus",value:function(){return!1===this.props.isChange?!0===this.lightStatus?this.renderOn():this.renderOff():(this.lightStatus=this.props.status,!0===this.props.status?this.renderOn():this.renderOff())}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{margin:"35px",background:"#ececec",padding:"40px 0px",borderRadius:"6px"}},r.a.createElement("div",{style:{width:"100%",display:"flex"}},r.a.createElement("div",{style:{width:"20%",paddingLeft:"10px"}},r.a.createElement(Ee.a,{disabled:this.props.isDisabled,checked:this.props.status,onClick:function(){e.props.changeStatus(e.props.id,e.props.status)}})),r.a.createElement("div",{style:{width:"60%",textAlign:"center",fontSize:"25px",fontFamily:"monospace",fontWeight:"bold"}},this.props.children),r.a.createElement("div",{style:{width:"20%"}})),r.a.createElement("div",{style:{textAlign:"center"}},this.showStatus()))}}]),t}(n.Component),xe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).isChange=!0,a.lightStatus=a.props.status,a.state={status:a.props.status},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"renderOn",value:function(){return r.a.createElement(d.a,{size:100,icon:r.a.createElement(ve.a,null),style:{backgroundColor:"#87d068"}})}},{key:"renderOff",value:function(){return r.a.createElement(d.a,{size:100,icon:r.a.createElement(ve.a,null)})}},{key:"showStatus",value:function(){return!1===this.props.isChange?!0===this.lightStatus?this.renderOn():this.renderOff():(this.lightStatus=this.props.status,!0===this.props.status?this.renderOn():this.renderOff())}},{key:"render",value:function(){return r.a.createElement("div",{style:{background:"#ececec",padding:"40px 0px"}},r.a.createElement("div",{style:{width:"100%",display:"flex"}},r.a.createElement("div",{style:{width:"100%",textAlign:"center",fontSize:"25px",fontFamily:"monospace",fontWeight:"bold"}},this.props.children)),r.a.createElement("div",{style:{textAlign:"center"}},this.showStatus()))}}]),t}(n.Component),Oe=a(97),Se=a.n(Oe),Ce={0:"0 Kg",50:"50 Kg",200:{style:{color:"#f50"},label:r.a.createElement("strong",null,"200Kg")}},we=ne.a.Option,je=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).dataChart=[],a.getAckServer=function(e){console.log("Ack from server "+JSON.stringify(e)),a.props.location.aboutProps.code===e.machine&&a.setState({dataDevice:e.data,isChange:!0,statusMachine:e.stt,isDisabled:!1}),-1===a.state.statusMachine&&be()({title:"Oppsss...!",text:"M\xe1y s\u1ea5y \u0111\xe3 b\u1ecb t\u1eaft!",icon:"error",button:"OK"})},a.getDataServer=function(e){if(a.props.location.aboutProps.code===e.machine){var t={x:e.time,y:e.temp};a.dataChart.push(t),a.dataChart.length>15&&a.dataChart.shift(),a.setState({dataLineChart:a.dataChart})}},a.componentWillUnmount=function(){a.socket.close()},a.onChangeTempValue=function(e){a.setState({dataControl:Object(F.a)({},a.state.dataControl,{tempValue:e})})},a.onChangeHumidValue=function(e){a.setState({dataControl:Object(F.a)({},a.state.dataControl,{humidValue:e})})},a.onChangeMassValue=function(e){a.setState({dataControl:Object(F.a)({},a.state.dataControl,{massValue:e})})},a.waitFor=function(e,t){return new Promise((function(n){var r=e.split(""),i=a.state.dataDevice;i.forEach((function(e,t){e.status=Boolean(Number(r[t]))})),a.setState({dataDevice:i,isChange:!1}),a.socket.emit("client-send-control",{machine:a.props.location.aboutProps.code,stt:1,data:a.state.dataDevice}),console.log("sent!!!"),setTimeout(n,t)}))},a.asyncForEach=function(){var e=Object(D.a)(T.a.mark((function e(t,n){var r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=9;break}if(-1!==a.state.statusMachine){e.next=4;break}return e.abrupt("break",9);case 4:return e.next=6,n(t[r],r,t);case 6:r++,e.next=1;break;case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a.start=function(){var e=Object(D.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.asyncForEach(t,function(){var e=Object(D.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.waitFor(t.stt,t.time);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:return e.next=4,a.updateConfigTimeFinish();case 4:if(-1===a.state.statusMachine){e.next=7;break}return e.next=7,a.socket.emit("client-send-control-complete",{machine:a.props.location.aboutProps.code,stt:0,data:a.state.dataDevice});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onChangeSelect=function(e){a.setState({dataControl:Object(F.a)({},a.state.dataControl,{selectedFruit:e})})},a.onChangeSelectScript=function(e){var t=a.state.listScript[e].totalTime,n=a.state.listScript[e].script,r=a.state.listScript[e].name;console.log(n),a.setState({timeFinish:t,timeActive:!1,choosenScript:n,nameOfChoosenScript:r})},a.changeStatus=function(e,t){a.setState((function(a){var n=Object(ae.a)(a.dataDevice);return n[e-1].status=!t,{dataDevice:n}})),a.setState({isChange:!1})},a.countdownRef=r.a.createRef();return a.state={timeActive:!1,timeStartActive:"",timeFinishActive:"",timeFinish:0,isChange:!0,isDisabled:!1,isChooseScript:!0,statusMachine:0,flagTime:!1,standardTime:0,choosenScript:"",idSetup:"",nameOfChoosenScript:"",dataLineChart:[],dataControl:{tempValue:100,humidValue:100,massValue:100,selectedFruit:"Banana"},typeOfFruit:[{id:1,value:"Banana"},{id:2,value:"Orange"},{id:3,value:"Pine Apple"},{id:4,value:"Coconut"}],dataNewScript:[],listScript:[],dataDevice:[]},a.socket=Se()("192.168.100.5:2017"),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,a,n,r;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.socket.on("server-send-ack",this.getAckServer),this.socket.on("server-send-data",this.getDataServer),e.next=4,de();case 4:return t=e.sent,e.next=7,i=this.props.location.aboutProps.code,P.a.post("/machines/get-data-device",{code:i}).then((function(e){return e.data})).catch((function(e){return e}));case 7:a=e.sent,n=a.dataDevice,r=a.statusMachine,this.setState({listScript:t,dataDevice:n,statusMachine:r});case 11:case"end":return e.stop()}var i}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"send",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,a,n,r,i,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.socket.emit("client-send-control",{machine:this.props.location.aboutProps.code,stt:1,data:this.state.dataDevice}),t="",e.next=4,this.state.dataDevice.forEach((function(e){t+=Number(e.status)}));case 4:a=(new Date).getTime(),n=new Date(a).toString(),!1===this.state.flagTime?(r={time:0,stt:t},this.setState({flagTime:!0,standardTime:Date.now(),timeStartActive:n,isDisabled:!0}),this.setState((function(e){return{dataNewScript:[].concat(Object(ae.a)(e.dataNewScript),[r])}})),this.onClickSendConfigNotTimeFinish()):(i=Date.now()-this.state.standardTime,o={time:i,stt:t},this.setState((function(e){return{dataNewScript:[].concat(Object(ae.a)(e.dataNewScript),[o]),standardTime:Date.now(),isDisabled:!0}}))),console.log(this.state.dataNewScript);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"finish",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,a,n,r,i,o,s,c,l;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(new Date).getTime(),a=new Date(t).toString(),this.setState({isChange:!1,flagTime:!1,timeFinishActive:a,isDisabled:!0}),e.next=5,this.setState((function(e){var t=Object(ae.a)(e.dataDevice);return t.forEach((function(e){e.status=!1})),{dataDevice:t}}));case 5:return this.socket.emit("client-send-control",{machine:this.props.location.aboutProps.code,stt:0,data:this.state.dataDevice}),n=Date.now()-this.state.standardTime,r={time:n,stt:"0000"},e.next=10,this.setState((function(e){return{dataNewScript:[].concat(Object(ae.a)(e.dataNewScript),[r])}}));case 10:for(i=0,o=0;o<this.state.dataNewScript.length;o++)i+=this.state.dataNewScript[o].time;return s=JSON.stringify(this.state.dataNewScript),c={name:this.state.nameOfChoosenScript,script:s,totalTime:i},l={name:this.state.nameOfChoosenScript,script:this.state.dataNewScript,totalTime:i,useremail:localStorage.getItem("useremail")},e.next=17,this.setState((function(e){return{listScript:[].concat(Object(ae.a)(e.listScript),[c])}}));case 17:pe(l).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),this.updateConfigTimeFinish(),this.setState({dataNewScript:[]});case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateConfigTimeFinish",value:function(){(function(e){return P.a.post("/setups/update-time-setups",{id:e.id,time:e.time}).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),e}))})({id:this.state.idSetup,time:this.state.timeFinishActive.slice(0,24)}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),this.socket.emit("client-get-data-complete",{machine:this.props.location.aboutProps.code,idSetup:this.state.idSetup})}},{key:"onClickSendConfigNotTimeFinish",value:function(){var e=this;(function(e){return P.a.post("/setups/add-setup",{user_email:e.user_email,machine_name:e.machine_name,code:e.code,mass:e.mass,typeOfFruit:e.typeOfFruit,timeStart:e.timeStart,timeFinish:e.timeFinish,script:e.script}).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),e}))})({user_email:localStorage.getItem("useremail"),machine_name:this.props.location.aboutProps.name,code:this.props.location.aboutProps.code,mass:this.state.dataControl.massValue,script:this.state.nameOfChoosenScript,typeOfFruit:this.state.dataControl.selectedFruit,timeStart:this.state.timeStartActive.slice(0,24)}).then((function(t){console.log(t),e.setState({idSetup:t.id}),e.socket.emit("client-get-data",{machine:e.props.location.aboutProps.code,idSetup:t.id})})).catch((function(e){console.log(e)}))}},{key:"onClickStartScript",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,a,n,r,i,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.choosenScript){e.next=14;break}return t=(new Date).getTime(),a=t+this.state.timeFinish,n=new Date(t).toString(),r=new Date(a).toString(),e.next=7,this.setState({timeActive:!0,timeStartActive:n,timeFinishActive:r});case 7:for(this.onClickSendConfigNotTimeFinish(),i=JSON.parse(this.state.choosenScript),o=0;o<i.length;o++)o!==i.length-1?i[o].time=i[o+1].time:i[o].time=0;console.log(this.state.choosenScript),this.start(i),e.next=15;break;case 14:be()({title:"Oppesss...!",text:"B\u1ea1n ch\u01b0a ch\u1ecdn k\u1ecbch b\u1ea3n!",icon:"warning",button:"OK"});case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderTimeActive",value:function(){if(!0===this.state.timeActive)return r.a.createElement("div",null,r.a.createElement("h5",{style:{fontSize:"20px"}},"Th\u1eddi gian b\u1eaft \u0111\u1ea7u: ",this.state.timeStartActive.slice(16,24)),r.a.createElement("h5",{style:{fontSize:"20px"}},"Th\u1eddi gian k\u1ebft th\xfac d\u1ef1 ki\u1ebfn: ",this.state.timeFinishActive.slice(16,24)))}},{key:"renderPeriod",value:function(){var e=new Date(this.state.timeFinish).toISOString().slice(11,19);return r.a.createElement("h5",{style:{fontSize:"20px"}},"Th\u1eddi l\u01b0\u1ee3ng s\u1ea5y: ",e)}},{key:"renderCreateScript",value:function(){var e=this;return r.a.createElement("div",{style:{margin:"20px",background:"white",borderRadius:"6px"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{fontSize:"50px",textAlign:"center",width:"85%"}},this.props.location.aboutProps.name),r.a.createElement("div",{style:{width:"15%",margin:"15px"},onClick:function(){return e.onClickCreateScript()}},r.a.createElement(ge.a,{id:"sw-method1",style:{fontSize:"45px",border:"1px #D7EEF1 solid",width:"80px",borderRadius:"10px",backgroundColor:"#F1F8F9"}}))),r.a.createElement("div",{style:{margin:"10px",background:"white",padding:"0px 20px",borderRadius:"6px"}},r.a.createElement("h4",{style:{fontSize:"25px"}},"Ch\u1ecdn th\xf4ng s\u1ed1 \u0111\u1ec3 kh\u1edfi \u0111\u1ed9ng m\xe1y s\u1ea5y"),r.a.createElement(re.a,{marks:Ce,defaultValue:100,max:200,min:0,onChange:this.onChangeMassValue}),r.a.createElement(ne.a,{defaultValue:"Banana",style:{width:200,margin:"10px 0px",fontSize:"22px"},onChange:this.onChangeSelect},this.state.typeOfFruit.map((function(e){return r.a.createElement(we,{style:{height:"35px"},key:e.id,value:e.value},e.value)})))),r.a.createElement("div",{style:{backgroundColor:"#f0f2f5",height:"25px"}}),r.a.createElement("div",{style:{marginLeft:"35px"}},r.a.createElement("div",{style:{display:"flex",paddingTop:"20px"}},r.a.createElement("div",{style:{width:"50%"}},r.a.createElement("h4",{style:{fontSize:"25px"}},"\u0110i\u1ec1u khi\u1ec3n m\xe1y s\u1ea5y theo k\u1ecbch b\u1ea3n",r.a.createElement("span",{style:{textTransform:"uppercase"}},"\xa0 ",this.state.nameOfChoosenScript))),r.a.createElement("div",{style:{width:"25%",textAlign:"center"}},r.a.createElement(N.a,{id:"btnSend",shape:"circle",style:{fontSize:"25px",height:"85px",width:"85px",fontWeight:"bold",border:"1px #D7EEF1 solid",backgroundColor:"#F1F8F9"},onClick:function(){return e.send()}},"SEND")),r.a.createElement("div",{style:{width:"25%",fontSize:"45px"}},r.a.createElement(N.a,{id:"btnFinish",style:{borderRadius:"6px",fontSize:"25px",height:"85px",width:"125px",fontWeight:"bold",border:"1px #FFD3D3 solid",backgroundColor:"#FFE8E8"},onClick:function(){return e.finish()}},"FINISH")))),r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},this.state.dataDevice.map((function(t){return r.a.createElement("div",{key:t.id,style:{width:"50%"}},r.a.createElement(ke,{isDisabled:e.state.isDisabled,isChange:e.state.isChange,status:t.status,id:t.id,changeStatus:e.changeStatus.bind(e)},t.title))}))))}},{key:"renderChooseScript",value:function(){var e=this;return r.a.createElement("div",{style:{margin:"20px",background:"white",borderRadius:"6px"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{fontSize:"50px",textAlign:"center",width:"85%"}},this.props.location.aboutProps.name),r.a.createElement("div",{style:{width:"15%",margin:"15px"},onClick:function(){return e.onClickChooseScript()}},r.a.createElement(ge.a,{id:"sw-method2",style:{fontSize:"45px",border:"1px #D7EEF1 solid",width:"80px",borderRadius:"10px",backgroundColor:"#F1F8F9"}}))),r.a.createElement("div",{style:{margin:"10px",background:"white",padding:"0px 20px",borderRadius:"6px"}},r.a.createElement("h4",{style:{fontSize:"25px"}},"Ch\u1ecdn th\xf4ng s\u1ed1 \u0111\u1ec3 kh\u1edfi \u0111\u1ed9ng m\xe1y s\u1ea5y"),r.a.createElement(re.a,{marks:Ce,defaultValue:100,max:200,min:0,onChange:this.onChangeMassValue}),r.a.createElement(ne.a,{defaultValue:"Banana",style:{width:"200px",margin:"10px 0px",fontSize:"22px"},onChange:this.onChangeSelect},this.state.typeOfFruit.map((function(e){return r.a.createElement(we,{style:{height:"35px"},key:e.id,value:e.value},e.value)})))),r.a.createElement("div",{style:{padding:"0px 20px",margin:"10px"}},r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{width:"40%"}}),r.a.createElement("div",{style:{width:"20%"}}),r.a.createElement("div",{style:{width:"40%"}})),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{style:{width:"40%"}},r.a.createElement("h4",{style:{fontSize:"25px"}},"Ch\u1ecdn k\u1ecbch b\u1ea3n s\u1ea5y"),r.a.createElement(ne.a,{defaultValue:"H\xe3y ch\u1ecdn k\u1ecbch b\u1ea3n",style:{width:200,margin:"10px 0px",fontSize:"17px"},onChange:this.onChangeSelectScript},this.state.listScript.map((function(e,t){return r.a.createElement(we,{key:e.name,choosenScript:e.script,value:t},e.name)})))),r.a.createElement("div",{style:{width:"60%",fontSize:"45px"}},this.renderPeriod(),this.renderTimeActive()))),r.a.createElement("div",{style:{backgroundColor:"#f0f2f5",height:"25px"}}),r.a.createElement("div",{style:{textAlign:"center",margin:"20px",background:"white",borderRadius:"6px"}},r.a.createElement("h4",{style:{fontSize:"25px"}},"B\u1ea3ng \u0111i\u1ec1u khi\u1ec3n"),r.a.createElement(N.a,{id:"btnStart",shape:"circle",style:{fontSize:"25px",height:"85px",width:"85px",fontWeight:"bold",border:"1px #D7EEF1 solid",backgroundColor:"#F1F8F9"},onClick:function(){return e.onClickStartScript()}},"START"),r.a.createElement("div",{style:{display:"flex",flexWrap:"wrap",padding:"25px 15px"}},this.state.dataDevice.map((function(t){return r.a.createElement("div",{key:t.id,style:{width:"25%"}},r.a.createElement(xe,{isChange:e.state.isChange,status:t.status,id:t.id,changeStatus:e.changeStatus.bind(e)},t.title))})))))}},{key:"onClickChooseScript",value:function(){var e=this;1===this.state.statusMachine?be()({title:"Oppesss...!",text:"Kh\u1ed5ng th\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\xe0y khi m\xe1y \u0111ang ho\u1ea1t \u0111\u1ed9ng!",icon:"warning",button:"OK"}):be()("Nh\u1eadp t\xean k\u1ecbch b\u1ea3n m\u1edbi",{content:"input",icon:"info"}).then((function(t){""!==t&&e.setState({isChooseScript:!1,nameOfChoosenScript:t})}))}},{key:"onClickCreateScript",value:function(){1===this.state.statusMachine?be()({title:"Oppesss...!",text:"Kh\u1ed5ng th\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\xe0y khi m\xe1y \u0111ang ho\u1ea1t \u0111\u1ed9ng!",icon:"warning",button:"OK"}):this.setState({isChooseScript:!0})}},{key:"showSwitch",value:function(){return!0===this.state.isChooseScript?this.renderChooseScript():this.renderCreateScript()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ie.a,{style:{margin:"15px"}},r.a.createElement(oe.a,{span:12},r.a.createElement("div",{style:{minHeight:"400px",margin:"20px",background:"white",borderRadius:"6px"}},r.a.createElement(ie.a,{style:{paddingTop:"20px"}},r.a.createElement(le,{data:this.state.dataLineChart})),r.a.createElement(ie.a,{style:{paddingTop:"20px"}},r.a.createElement(ue,{data:this.state.dataLineChart})))),r.a.createElement(oe.a,{span:12},this.showSwitch())))}}]),t}(n.Component),Te=(a(242),function(e){var t=e.component,a=Object(I.a)(e,["component"]);return r.a.createElement(w.b,Object.assign({},a,{render:function(e){return ee.isAuthenticated()?r.a.createElement(t,e):(H()({title:"Oppss...!",text:"Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\xe0y!",icon:"error",button:"OK"}),r.a.createElement(w.a,{to:{pathname:"/",state:{from:e.location}}}))}}))}),Fe=a(127),Ie=a.n(Fe),De={labelCol:{span:8},wrapperCol:{span:16}},Re={wrapperCol:{offset:8,span:16}},Ae=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).formRef=r.a.createRef(),a.onFinish=function(e){var t,n=Object(F.a)({},e);(t={id:a.state.id,first_name:n.first_name,last_name:n.last_name,email:n.email,dob:a.state.dob,phone:n.phone,role:n.role},P.a.post("/users/update-user",{id:t.id,first_name:t.first_name,last_name:t.last_name,email:t.email,dob:t.dob,phone:t.phone,role:t.role}).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),e}))).then((function(e){"error"!==e?H()({title:"Tadaa...!",text:"".concat(e),icon:"success",button:"OK"}):H()({title:"Opposss...!",text:"Email c\xf3 th\u1ec3 b\u1ecb tr\xf9ng. H\xe3y th\u1eed l\u1ea1i!",icon:"error",button:"OK"})})),console.log(n)},a.onReset=function(){a.formRef.current.resetFields()},a.onFill=function(){a.formRef.current.setFieldsValue({email:"Hello world!",first_name:"male"})},a.state={dob:"1900/12/12",id:"-1"},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a={email:this.props.location.aboutProps.email},console.log("getProfile "+JSON.stringify(a)),P.a.post("/users/profile",{email:a},{headers:{authorization:localStorage.getItem("usertoken")}}).then((function(e){return e.data})).catch((function(e){console.log(e)}));case 2:(t=e.sent)&&(this.formRef.current.setFieldsValue({email:t.email,phone:t.phone,role:t.role,first_name:t.first_name,last_name:t.last_name}),this.setState({dob:t.dob,id:t.id}));case 4:case"end":return e.stop()}var a}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{style:{margin:"60px",background:"white"}},r.a.createElement("h1",{style:{margin:"25px",fontSize:"45px"}},"Th\xf4ng tin t\xe0i kho\u1ea3n"),r.a.createElement("div",{style:{marginRight:"250px",paddingBottom:"15px"}},r.a.createElement(W.a,Object.assign({},De,{ref:this.formRef,name:"control-ref",onFinish:this.onFinish}),r.a.createElement(W.a.Item,{name:"email",label:"Email",rules:[{type:"email",message:"Email kh\xf4ng h\u1ee3p l\u1ec7"},{required:!0,message:"Xin nh\u1eadp Email"}]},r.a.createElement(Y.a,null)),r.a.createElement(W.a.Item,{name:"role",label:"Ch\u1ee9c n\u0103ng",rules:[{required:!0}]},r.a.createElement(U.a.Group,null,r.a.createElement(U.a,{value:"quanly"},"Qu\u1ea3n l\xfd"),r.a.createElement(U.a,{value:"vanhanh"},"V\u1eadn h\xe0nh"))),r.a.createElement(W.a.Item,{name:"first_name",label:"H\u1ecd v\xe0 \u0111\u1ec7m",rules:[{required:!0,message:"Xin h\xe3y nh\u1eadp H\u1ecd v\xe0 t\xean \u0111\u1ec7m!"}]},r.a.createElement(Y.a,null)),r.a.createElement(W.a.Item,{name:"last_name",label:"T\xean",rules:[{required:!0,message:"Xin h\xe3y nh\u1eadp T\xean!"}]},r.a.createElement(Y.a,null)),r.a.createElement(W.a.Item,{label:"Ng\xe0y sinh"},r.a.createElement(J.a,{value:Ie()("".concat(this.state.dob),"YYYY/MM/DD"),format:"YYYY/MM/DD",disabled:!0})),r.a.createElement(W.a.Item,{name:"phone",label:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i",rules:[{required:!0,message:"Xin h\xe3y nh\u1eadp S\u1ed1 \u0111i\u1ec7n tho\u1ea1i!"}]},r.a.createElement(Y.a,null)),r.a.createElement(W.a.Item,Re,r.a.createElement(N.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(N.a,{htmlType:"button",onClick:this.onReset},"Reset"),r.a.createElement(N.a,{type:"link",htmlType:"button",onClick:this.onFill},"Fill form")))))}}]),t}(n.Component),Me=(a(534),h.a.Content),Ne=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).getAckServer=function(e){console.log("Ack from server "+JSON.stringify(e));var t=e.map((function(e){var t=e.id,a=Object(I.a)(e,["id"]);return Object(F.a)({key:t},a)}));a.setState({data:t})},a.componentWillUnmount=function(){a.socket.close()},a.checkStatusMachine=function(e){var t=a.state.data.find((function(t){return t.key===e}));-1===t.statusMachine?H()({title:"Oppss...!",text:"M\xe1y n\xe0y ch\u01b0a ho\u1ea1t \u0111\u1ed9ng!",icon:"error",button:"OK"}):a.props.history.push({pathname:"/all-machine/"+a.to_slug(t.name),aboutProps:{name:"".concat(t.name),code:"".concat(t.code)}})},a.deleteMachine=function(e){var t;(t={id:e},P.a.post("/machines/delete-machine",{id:t.id}).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),e}))).then((function(t){if(console.log(e),t.error)H()({title:"Oppss...!",text:"X\xf3a kh\xf4ng th\xe0nh c\xf4ng!",icon:"error",button:"OK"});else{var n=a.state.data.filter((function(t){return t.key!==e}));console.log(n),a.setState({data:n}),H()({title:"Tadaaa...!",text:"X\xf3a th\xe0nh c\xf4ng!",icon:"success",button:"OK"})}}))},a.to_slug=function(e){return e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=(e=e.toLowerCase()).replace(/(\xe0|\xe1|\u1ea1|\u1ea3|\xe3|\xe2|\u1ea7|\u1ea5|\u1ead|\u1ea9|\u1eab|\u0103|\u1eb1|\u1eaf|\u1eb7|\u1eb3|\u1eb5)/g,"a")).replace(/(\xe8|\xe9|\u1eb9|\u1ebb|\u1ebd|\xea|\u1ec1|\u1ebf|\u1ec7|\u1ec3|\u1ec5)/g,"e")).replace(/(\xec|\xed|\u1ecb|\u1ec9|\u0129)/g,"i")).replace(/(\xf2|\xf3|\u1ecd|\u1ecf|\xf5|\xf4|\u1ed3|\u1ed1|\u1ed9|\u1ed5|\u1ed7|\u01a1|\u1edd|\u1edb|\u1ee3|\u1edf|\u1ee1)/g,"o")).replace(/(\xf9|\xfa|\u1ee5|\u1ee7|\u0169|\u01b0|\u1eeb|\u1ee9|\u1ef1|\u1eed|\u1eef)/g,"u")).replace(/(\u1ef3|\xfd|\u1ef5|\u1ef7|\u1ef9)/g,"y")).replace(/(\u0111)/g,"d")).replace(/([^0-9a-z-\s])/g,"")).replace(/(\s+)/g,"-")).replace(/^-+/g,"")).replace(/-+$/g,"")};return a.state={data:[]},a.socket=Se()("192.168.100.5:2017"),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.socket.on("server-send-ack-machineTable",this.getAckServer),e.next=3,P.a.get("/machines/get-all-machines",{headers:{authorization:localStorage.getItem("usertoken")}}).then((function(e){return e.data})).catch((function(e){console.log(e)}));case 3:t=e.sent,a=t.map((function(e){var t=e.id,a=Object(I.a)(e,["id"]);return Object(F.a)({key:t},a)})),this.setState({data:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"renderOn",value:function(){return r.a.createElement(d.a,{size:130,icon:r.a.createElement(ve.a,null),style:{backgroundColor:"#87d068"}})}},{key:"renderOff",value:function(){return r.a.createElement(d.a,{size:130,icon:r.a.createElement(ve.a,null)})}},{key:"renderReady",value:function(){return r.a.createElement(d.a,{size:130,icon:r.a.createElement(ve.a,null),style:{backgroundColor:"#EAFA2C"}})}},{key:"showStatusMachine",value:function(e){return 1===e?this.renderOn():0===e?this.renderReady():this.renderOff()}},{key:"render",value:function(){var e=this;return r.a.createElement(Me,null,r.a.createElement(A.a,{style:{margin:"16px 0"}},r.a.createElement(A.a.Item,null),r.a.createElement(A.a.Item,null)),r.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:360,display:"flex",flexWrap:"wrap",margin:"35px",borderRadius:"6px"}},this.state.data.map((function(t){return r.a.createElement("div",{key:t.key.toString(),style:{backgroundColor:"#f1f1f1",width:"30%",margin:"22px",textAlign:"center",lineHeight:"75px",fontSize:"30px",borderRadius:"6px"}},r.a.createElement("div",{id:"name-machine",style:{fontSize:"35px",color:"#1890ff"},onClick:function(){return e.checkStatusMachine(t.key)}},t.name),e.showStatusMachine(t.statusMachine),r.a.createElement("div",null,t.position),r.a.createElement("div",null,r.a.createElement(N.a,{type:"link",style:{fontSize:"35px"}},r.a.createElement(x.b,{to:{pathname:"/edit-machine",aboutProps:{id:"".concat(t.key)}}},"Edit")),r.a.createElement(N.a,{type:"link",danger:!0,style:{fontSize:"35px"},onClick:function(){return e.deleteMachine(t.key)}},"Delete"),r.a.createElement(x.b,{to:{pathname:"/all-machine/"+e.to_slug(t.name),aboutProps:{name:"".concat(t.name),code:"".concat(t.code)}}},r.a.createElement("div",{style:{fontSize:"35px"}},"test"))))}))))}}]),t}(n.Component),ze=h.a.Content,Pe=Y.a.TextArea,_e={labelCol:{span:8},wrapperCol:{span:16}},Ve={wrapperCol:{offset:8,span:16}},qe=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).formRef=r.a.createRef(),a.onFinish=function(e){console.log(e),he({name:e.name,code:e.code,description:e.description,position:e.position}).then((function(e){console.log(e),e.error?H()({title:"Oppss...!",text:"T\xean m\xe1y \u0111\xe3 t\u1ed3n t\u1ea1i!",icon:"error",button:"OK"}):H()({title:"Tadaaa...!",text:"T\u1ea1o m\xe1y th\xe0nh c\xf4ng!",icon:"success",button:"OK"})}))},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(ze,{style:{margin:"0 16px"}},r.a.createElement(A.a,{style:{margin:"16px 0"}},r.a.createElement(A.a.Item,null,"User"),r.a.createElement(A.a.Item,null,"Bill")),r.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:360}},r.a.createElement("h1",{style:{margin:"10px",fontSize:"45px"}},"T\u1ea1o m\xe1y s\u1ea5y"),r.a.createElement("div",{style:{marginRight:"250px",paddingBottom:"15px"}},r.a.createElement(W.a,Object.assign({},_e,{ref:this.formRef,name:"control-ref",onFinish:this.onFinish}),r.a.createElement(W.a.Item,{name:"name",label:"T\xean m\xe1y s\u1ea5y",rules:[{required:!0,message:"Xin nh\u1eadp T\xean m\xe1y s\u1ea5y"}]},r.a.createElement(Y.a,null)),r.a.createElement(W.a.Item,{name:"code",label:"M\xe3 CODE m\xe1y s\u1ea5y",rules:[{required:!0,message:"Xin nh\u1eadp m\xe3 CODE in tr\xean m\xe1y s\u1ea5y"}]},r.a.createElement(Y.a,null)),r.a.createElement(W.a.Item,{name:"position",label:"V\u1ecb tr\xed \u0111\u1eb7t m\xe1y",rules:[{required:!0,message:"Xin h\xe3y nh\u1eadp V\u1ecb tr\xed \u0111\u1eb7t m\xe1y!"}]},r.a.createElement(Y.a,null)),r.a.createElement(W.a.Item,{name:"description",label:"M\xf4 t\u1ea3 m\xe1y s\u1ea5y",rules:[{required:!0,message:"Xin h\xe3y nh\u1eadp M\xf4 t\u1ea3!"}]},r.a.createElement(Pe,{row:4})),r.a.createElement(W.a.Item,Ve,r.a.createElement(N.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(N.a,{htmlType:"button",onClick:this.onReset},"Reset"),r.a.createElement(N.a,{type:"link",htmlType:"button",onClick:this.onFill},"Fill form"))))))}}]),t}(n.Component),He=h.a.Content,Ke=Y.a.TextArea,Be={labelCol:{span:8},wrapperCol:{span:16}},Xe={wrapperCol:{offset:8,span:16}},Le=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).formRef=r.a.createRef(),a.onFinish=function(e){var t,n=Object(F.a)({},e);(t={id:a.state.id,name:n.name,position:n.position,description:n.description,code:n.code},P.a.post("/machines/update-machine",{id:t.id,position:t.position,name:t.name,description:t.description,code:t.code}).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),e}))).then((function(e){"error"!==e?H()({title:"Tadaa...!",text:"".concat(e),icon:"success",button:"OK"}):H()({title:"Opposss...!",text:"T\xean m\xe1y c\xf3 th\u1ec3 b\u1ecb tr\xf9ng. H\xe3y th\u1eed l\u1ea1i!",icon:"error",button:"OK"})})),console.log(n)},a.state={id:"-1"},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a={id:this.props.location.aboutProps.id},P.a.post("/machines/profile",{id:a},{headers:{authorization:localStorage.getItem("usertoken")}}).then((function(e){return console.log("Registerd"),e.data})).catch((function(e){return e}));case 2:t=e.sent,console.log(t),t&&(this.formRef.current.setFieldsValue({name:t.name,description:t.description,position:t.position}),this.setState({id:t.id}));case 5:case"end":return e.stop()}var a}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(He,{style:{margin:"0 16px"}},r.a.createElement(A.a,{style:{margin:"16px 0"}},r.a.createElement(A.a.Item,null,"User"),r.a.createElement(A.a.Item,null,"Bill")),r.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:360}},r.a.createElement("h1",{style:{margin:"10px",fontSize:"45px"}},"Ch\u1ec9nh s\u1eeda th\xf4ng tin m\xe1y s\u1ea5y"),r.a.createElement("div",{style:{marginRight:"250px",paddingBottom:"15px"}},r.a.createElement(W.a,Object.assign({},Be,{ref:this.formRef,name:"control-ref",onFinish:this.onFinish}),r.a.createElement(W.a.Item,{name:"name",label:"T\xean m\xe1y s\u1ea5y",rules:[{required:!0,message:"Xin nh\u1eadp T\xean m\xe1y s\u1ea5y"}]},r.a.createElement(Y.a,null)),r.a.createElement(W.a.Item,{name:"position",label:"V\u1ecb tr\xed \u0111\u1eb7t m\xe1y",rules:[{required:!0,message:"Xin h\xe3y nh\u1eadp V\u1ecb tr\xed \u0111\u1eb7t m\xe1y!"}]},r.a.createElement(Y.a,null)),r.a.createElement(W.a.Item,{name:"description",label:"M\xf4 t\u1ea3 m\xe1y s\u1ea5y",rules:[{required:!0,message:"Xin h\xe3y nh\u1eadp M\xf4 t\u1ea3!"}]},r.a.createElement(Ke,{row:4})),r.a.createElement(W.a.Item,Xe,r.a.createElement(N.a,{type:"primary",htmlType:"submit"},"Submit"),r.a.createElement(N.a,{htmlType:"button",onClick:this.onReset},"Reset"),r.a.createElement(N.a,{type:"link",htmlType:"button",onClick:this.onFill},"Fill form"))))))}}]),t}(n.Component),We=(a(535),h.a.Content),Ye=(n.Component,h.a.Content),Ue=R.a.Column,Je=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).dataResult=[],a.generateReport=function(){P.a.get("/setups/create-pdf").then((function(){return P.a.get("setups/get-pdf",{responseType:"blob"}).then((function(e){var t=new Blob([e.data],{type:"application/pdf"});Object(me.saveAs)(t,"report.pdf")})).catch((function(e){console.log("my err",e)}))})).catch((function(e){return console.log(e),e}))},a.handleOnRowShowData=function(e){a.props.history.push({pathname:"/data-chart/"+e.key,aboutProps:{setupId:"".concat(e.key),machine:"".concat(e.code)}})},a.handleOnRowClick=function(e,t){e.user_email===localStorage.getItem("useremail")?be()("\u0110\xe1nh gi\xe1 k\u1ebft qu\u1ea3: GOOD, MEDIUM or BAD",{content:"input",icon:"info"}).then((function(t){var n={id:e.key,result:t};console.log(n),a.dataResult.push(n),a.setState((function(a){var n=Object(ae.a)(a.data),r=n.findIndex((function(t){return t.key===e.key}));return n[r].result=t,{data:n}}))})):be()({title:"Oppss...!",text:"B\u1ea1n kh\xf4ng \u0111\u01b0\u1ee3c c\u1ea5p quy\u1ec1n \u0111\xe1nh gi\xe1 k\u1ebft qu\u1ea3!",icon:"warning",button:"OK"})},a.state={data:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.a.get("/setups/get-all-setups",{headers:{authorization:localStorage.getItem("usertoken")}}).then((function(e){return e.data})).catch((function(e){console.log(e)}));case 2:t=e.sent,a=t.map((function(e){var t=e.id,a=Object(I.a)(e,["id"]);return Object(F.a)({key:t},a)})),this.setState({data:a}),console.log(this.state.data);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,a,n,r,i,o;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=!0,a=!1,n=void 0,e.prev=3,r=this.dataResult[Symbol.iterator]();case 5:if(t=(i=r.next()).done){e.next=13;break}return o=i.value,e.next=9,s=o,P.a.post("/setups/update-setups",{id:s.id,result:s.result}).then((function(e){return console.log(e),e.data})).catch((function(e){return console.log(e),e}));case 9:e.sent;case 10:t=!0,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,n=e.t0;case 19:e.prev=19,e.prev=20,t||null==r.return||r.return();case 22:if(e.prev=22,!a){e.next=25;break}throw n;case 25:return e.finish(22);case 26:return e.finish(19);case 27:case"end":return e.stop()}var s}),e,this,[[3,15,19,27],[20,,22,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(Ye,{style:{margin:"0 16px"}},r.a.createElement(A.a,{style:{margin:"16px 0"}},r.a.createElement(A.a.Item,null),r.a.createElement(A.a.Item,null)),r.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:360}},r.a.createElement(R.a,{dataSource:this.state.data,onRow:function(t,a){return{onClick:function(){e.handleOnRowShowData(t)},onDoubleClick:function(){e.handleOnRowClick(t,a)}}}},r.a.createElement(Ue,{title:"Name of Device",dataIndex:"machine_name",key:"machine_name"}),r.a.createElement(Ue,{title:"Mass",dataIndex:"mass",key:"mass"}),r.a.createElement(Ue,{title:"Fruit",dataIndex:"typeOfFruit",key:"typeOfFruit"}),r.a.createElement(Ue,{title:"Script",dataIndex:"script",key:"script",render:function(e){return r.a.createElement("span",null,r.a.createElement(M.a,{color:"red"},e))}}),r.a.createElement(Ue,{title:"Person in chagre",dataIndex:"user_email",key:"user_email"}),r.a.createElement(Ue,{title:"Time start",dataIndex:"timeStart",key:"timeStart"}),r.a.createElement(Ue,{title:"Time stop",dataIndex:"timeFinish",key:"timeFinish"}),r.a.createElement(Ue,{title:"Result",dataIndex:"result",key:"result",render:function(e){var t="GOOD"===e?"green":"MEDIUM"===e?"yellow":"red";return r.a.createElement("span",null,r.a.createElement(M.a,{color:t},e))}})),r.a.createElement(N.a,{onClick:function(){e.generateReport()}},"Generate Report")))}}]),t}(n.Component),Qe=R.a.Column,Ge=h.a.Content,Ze=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={data:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,a;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,de();case 2:t=e.sent,a=t.map((function(e){var t=e.id,a=Object(I.a)(e,["id"]);return Object(F.a)({key:t},a)})),console.log(a),this.setState({data:a});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(Ge,{style:{margin:"0 16px"}},r.a.createElement(A.a,{style:{margin:"16px 0"}},r.a.createElement(A.a.Item,null),r.a.createElement(A.a.Item,null)),r.a.createElement("div",{className:"site-layout-background",style:{padding:24,minHeight:360}},r.a.createElement(R.a,{dataSource:this.state.data},r.a.createElement(Qe,{title:"Name of Script",dataIndex:"name",key:"name"}),r.a.createElement(Qe,{title:"Total Time",dataIndex:"totalTime",key:"totalTime",render:function(e){var t=new Date(e).toISOString().slice(11,19);return r.a.createElement("span",null,r.a.createElement(M.a,{color:"blue"},t))}}),r.a.createElement(Qe,{title:"Person in charge",dataIndex:"useremail",key:"username"}),r.a.createElement(Qe,{title:"Script",dataIndex:"script",key:"script"}))))}}]),t}(n.Component),$e=function(e){var t=e.component,a=Object(I.a)(e,["component"]);return r.a.createElement(w.b,Object.assign({},a,{render:function(e){return ee.isAuthenticated()?ee.isQL()?r.a.createElement(t,e):(H()({title:"Oppss...!",text:"Ch\u1ee9c n\u0103ng n\xe0y ch\u1ec9 d\xe0nh cho QU\u1ea2N L\xdd!",icon:"error",button:"OK"}),r.a.createElement(w.a,{to:{pathname:"/",state:{from:e.location}}})):(H()({title:"Oppss...!",text:"Vui l\xf2ng \u0111\u0103ng nh\u1eadp \u0111\u1ec3 s\u1eed d\u1ee5ng ch\u1ee9c n\u0103ng n\xe0y!",icon:"error",button:"OK"}),r.a.createElement(w.a,{to:{pathname:"/",state:{from:e.location}}}))}}))},et=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).intervalId=0;return a.state={clear:!1,data:[]},a.socket=Se()("52.163.241.147:80"),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket.on("server-send-ack-machineTable",(function(e){console.log(e)})),this.socket.on("server-send-ack",(function(e){console.log(e)})),this.socket.on("server-get-data",(function(t){e.intervalId=setInterval((function(){e.socket.emit("rasp-send-data",{machine:"abc123",temp:12,humid:15,idSetup:t.idSetup})}),3e3)})),this.socket.on("server-get-data-complete",(function(t){clearInterval(e.intervalId)}))}},{key:"onClickTest",value:function(){this.socket.emit("rasp-ready","abc123")}},{key:"onClickSendData",value:function(){this.socket.emit("rasp-send-data",{machine:"abc123",temp:35.6,humid:98.6})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(N.a,{style:{fontSize:"18px",height:"45px"},onClick:function(){return e.onClickTest()}},"Test"),r.a.createElement(N.a,{style:{fontSize:"18px",height:"45px"},onClick:function(){return e.onClickSendData()}},"Send Data"),r.a.createElement(N.a,{style:{fontSize:"18px",height:"45px"},onClick:function(){return e.onClickSendDataAuto()}},"Cancel Data Auto"))}}]),t}(n.Component),tt=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).dataChart=[],a.dataChartBar=[],a.state={dataLineChart:[],dataBarChart:[]},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=Object(D.a)(T.a.mark((function e(){var t,a,n=this;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:this.props.location.aboutProps.setupId,code:this.props.location.aboutProps.machine},e.next=3,fe(t);case 3:(a=e.sent).forEach((function(e){n.dataChart.push({x:e.created,y:e.temp})})),console.log(a),this.setState({dataLineChart:this.dataChart});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ie.a,{style:{margin:"15px"}},r.a.createElement(oe.a,{span:12},r.a.createElement("div",{style:{minHeight:"400px",margin:"20px",background:"white",borderRadius:"6px"}},r.a.createElement(ie.a,{style:{paddingTop:"20px"}},r.a.createElement(le,{data:this.state.dataLineChart})))),r.a.createElement(oe.a,{span:12},r.a.createElement("div",{style:{minHeight:"400px",margin:"20px",background:"white",borderRadius:"6px"}},r.a.createElement(ie.a,{style:{paddingTop:"20px"}},r.a.createElement(ue,{data:this.state.dataLineChart}))))))}}]),t}(n.Component),at=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(w.d,null,r.a.createElement(w.b,{exact:!0,path:"/",component:te}),r.a.createElement($e,{path:"/data-statistics",component:Je}),r.a.createElement(Te,{path:"/all-user",component:L}),r.a.createElement(Te,{path:"/add-user",component:Z}),r.a.createElement(w.b,{exact:!0,path:"/all-machine",component:Ne}),r.a.createElement(w.b,{path:"/all-machine/:name",component:je}),r.a.createElement(w.b,{path:"/data-chart/:key",component:tt}),r.a.createElement(Te,{path:"/edit-user",component:Ae}),r.a.createElement(Te,{path:"/edit-machine",component:Le}),r.a.createElement(Te,{path:"/add-machine",component:qe}),r.a.createElement(Te,{exact:!0,path:"/script",component:Ze}),r.a.createElement(w.b,{component:et})))}}]),t}(n.Component),nt=Object(w.g)(at),rt=(a(536),a(271)),it=a(270),ot=function(e){function t(){var e,a;Object(s.a)(this,t);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).loginRegLink=r.a.createElement("ul",{style:{height:"100%",paddingRight:"15px"}},r.a.createElement("li",{style:{float:"right"},className:"a-navbar"},r.a.createElement(x.b,{to:"/",style:{height:"100%"}},r.a.createElement(rt.a,{style:{fontSize:"35px",paddingTop:"13px"}})))),a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"logOut",value:function(e){var t=this;e.preventDefault(),localStorage.clear(),ee.logout((function(){t.props.history.push("/")}))}},{key:"render",value:function(){return r.a.createElement("div",{style:{height:"100%"}},localStorage.usertoken?r.a.createElement("ul",{style:{height:"100%",paddingRight:"15px"}},r.a.createElement("li",{style:{float:"right"},className:"a-navbar"},r.a.createElement("a",{href:"#a",onClick:this.logOut.bind(this),style:{height:"100%"}},r.a.createElement(it.a,{style:{fontSize:"35px",paddingTop:"13px"}}))),r.a.createElement("li",{style:{float:"right"},className:"a-navbar"},r.a.createElement(x.b,{to:{pathname:"/edit-user",aboutProps:{email:"".concat(localStorage.getItem("useremail"))}},style:{height:"100%"}},r.a.createElement(E.a,{style:{fontSize:"35px",paddingTop:"13px"}})))):this.loginRegLink)}}]),t}(n.Component),st=Object(w.g)(ot),ct=h.a.Header,lt=h.a.Footer,ut=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(x.a,null,r.a.createElement(h.a,{style:{minHeight:"100vh"}},r.a.createElement(C,null),r.a.createElement(h.a,{className:"site-layout"},r.a.createElement(ct,{className:"site-layout-background",style:{padding:0,minHeight:50}},r.a.createElement(st,null)),r.a.createElement(nt,null),r.a.createElement(lt,{style:{textAlign:"center"}},"WebApp Control Fruit Dryers \xa92020 Created by TNT"))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ut,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[294,1,2]]]);
//# sourceMappingURL=main.d6b1ba44.chunk.js.map